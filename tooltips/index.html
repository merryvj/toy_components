<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">

    </head>

    <body>


        <div class="article">
            <div>
                Guilt is not a response to anger; it is a response to oneâ€™s own actions or lack of action. If it leads to change then it can be useful, since it is then no longer guilt but the beginning of knowledge. Yet all too often, guilt is just another name for impotence, for defensiveness destructive of communication; it becomes a device to protect ignorance and the continuation of things the way they are, the ultimate protection for changelessness.
            </div>

            
            
        </div>

        <script>

            const svgs = `
            <div class="tooltip__icon">
                <svg class="tooltip__icon__svg">
                <path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path>
                </svg>
            </div>
            <div class="tooltip__icon">
                <svg class="tooltip__icon__svg">
                <path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path>
                </svg>
            </div>
            <div class="tooltip__icon">
                <svg class="tooltip__icon__svg">
                <path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path>
                </svg>
            </div>
            <div class="tooltip__divider"></div>
            <div class="tooltip__icon">
                <svg class="tooltip__icon__svg">
                <path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path>
                </svg>
            </div>
            `;

            const tooltip = document.createElement("div");
            tooltip.classList.add("tooltip");
            tooltip.innerHTML = svgs;
            
            const tooltipTail = document.createElement("div");
            tooltipTail.classList.add("tooltip__tail");

            const articleElement = document.getElementsByClassName("article")[0];
            articleElement.onmouseup = (event) => {
                const selection = document.getSelection();
                if (selection.type != "Range") {
                    document.body.removeChild(tooltip);
                    document.body.removeChild(tooltipTail);
                    return;
                }
            
                const anchorNode = selection.anchorNode;
                const focusNode = selection.focusNode;

                if (anchorNode != focusNode) {
                    return;
                }

                document.body.appendChild(tooltip);
                document.body.appendChild(tooltipTail);

                const rangeRect = selection.getRangeAt(0).getClientRects()[0];

                const tooltipWidth = tooltip.offsetWidth;
                const tooltipHeight = tooltip.offsetHeight;
                const tooltipTailWidth = tooltipTail.offsetWidth;
                const tooltipTailHeight = tooltipTail.offsetHeight;

                const y = rangeRect.y;
                const middleX = rangeRect.x + (rangeRect.width/2);
                tooltip.style.left = `${middleX - tooltipWidth/2}px`;
                tooltip.style.top = `${y - tooltipHeight}px`;
                tooltipTail.style.top = `${y - tooltipTailHeight/2}px`;
                tooltipTail.style.left = `${middleX - tooltipTailWidth/2}px`;

                
            }

            
        </script>


    </body>
    
<html>